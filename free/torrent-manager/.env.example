# =============================================================================
# Torrent Manager Plugin - Environment Configuration
# =============================================================================
# Torrent downloading with Transmission/qBittorrent integration, multi-source
# search, seeding policies, and VPN enforcement
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED - Auto-provided by nself CLI
# -----------------------------------------------------------------------------

# PostgreSQL connection string (auto-provided by nself)
DATABASE_URL=postgresql://postgres:password@localhost:5432/nself_db

# -----------------------------------------------------------------------------
# REQUIRED - Inter-Plugin Communication
# -----------------------------------------------------------------------------

# VPN Manager API URL for VPN status checking
# Points to the VPN plugin's API endpoint
VPN_MANAGER_URL=http://localhost:3200

# -----------------------------------------------------------------------------
# REQUIRED - Security Configuration (auto-provided by nself)
# -----------------------------------------------------------------------------

# API key for inter-plugin authentication
TORRENT_MANAGER_API_KEY=your-api-key-here

# Rate limiting (requests per window)
TORRENT_MANAGER_RATE_LIMIT_MAX=100

# Rate limiting window (milliseconds)
TORRENT_MANAGER_RATE_LIMIT_WINDOW_MS=60000

# -----------------------------------------------------------------------------
# OPTIONAL - Server Configuration
# -----------------------------------------------------------------------------

# Server port (default from plugin.json: 3201)
TORRENT_MANAGER_PORT=3201

# Log level: debug, info, warn, error
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# OPTIONAL - VPN Configuration
# -----------------------------------------------------------------------------

# Require active VPN before starting downloads (security feature)
# Set to 'false' to disable VPN requirement (not recommended)
VPN_REQUIRED=true

# -----------------------------------------------------------------------------
# OPTIONAL - Torrent Client Configuration
# -----------------------------------------------------------------------------

# Default torrent client: transmission, qbittorrent
DEFAULT_TORRENT_CLIENT=transmission

# Transmission RPC Configuration
TRANSMISSION_HOST=localhost
TRANSMISSION_PORT=9091
TRANSMISSION_USERNAME=
TRANSMISSION_PASSWORD=

# qBittorrent Web UI Configuration
QBITTORRENT_HOST=localhost
QBITTORRENT_PORT=8080
QBITTORRENT_USERNAME=admin
QBITTORRENT_PASSWORD=adminpass

# -----------------------------------------------------------------------------
# OPTIONAL - Download Configuration
# -----------------------------------------------------------------------------

# Default download directory (must be accessible by torrent client)
DOWNLOAD_PATH=/downloads

# Maximum concurrent active downloads
MAX_ACTIVE_DOWNLOADS=5

# -----------------------------------------------------------------------------
# OPTIONAL - Search Configuration
# -----------------------------------------------------------------------------

# Enabled search sources (comma-separated)
# Available: 1337x, yts, torrentgalaxy, tpb
ENABLED_SOURCES=1337x,yts,torrentgalaxy,tpb

# Search timeout per source (milliseconds)
SEARCH_TIMEOUT_MS=10000

# Search cache TTL (seconds)
# Results are cached to reduce load on torrent sites
SEARCH_CACHE_TTL_SECONDS=3600

# -----------------------------------------------------------------------------
# OPTIONAL - Seeding Policy
# -----------------------------------------------------------------------------

# Stop seeding after reaching this upload/download ratio
# Example: 2.0 means upload 2x the download size
SEEDING_RATIO_LIMIT=2.0

# Stop seeding after this many hours (default: 168 = 1 week)
SEEDING_TIME_LIMIT_HOURS=168

# -----------------------------------------------------------------------------
# Integration Notes
# -----------------------------------------------------------------------------
#
# VPN Integration:
#   - Torrent Manager checks VPN status before starting downloads
#   - Automatically pauses downloads if VPN disconnects
#   - Requires VPN plugin to be running at VPN_MANAGER_URL
#
# Client Setup:
#   Transmission:
#     - Install: apt-get install transmission-daemon
#     - Configure: /etc/transmission-daemon/settings.json
#     - Enable RPC: "rpc-enabled": true
#
#   qBittorrent:
#     - Install: apt-get install qbittorrent-nox
#     - Enable Web UI: qbittorrent-nox --webui-port=8080
#
# Search Sources:
#   - 1337x: General torrents, good quality
#   - YTS: Movies only, small file sizes
#   - TorrentGalaxy: Movies and TV, verified uploads
#   - TPB: The Pirate Bay (use with caution, verify torrents)
#
# Seeding Policies:
#   - Per-download policies override global limits
#   - Favorites are never auto-removed
#   - Policies configurable via API: PUT /v1/seeding/:id/policy
# -----------------------------------------------------------------------------
