# =============================================================================
# Jobs Plugin Configuration (BullMQ Background Jobs)
# =============================================================================
# Copy this file to .env and configure for your environment
# Documentation: See README.md for detailed configuration guide

# -----------------------------------------------------------------------------
# Required Variables (Plugin will not start without these)
# -----------------------------------------------------------------------------

# Database connection string
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://postgres:password@localhost:5432/nself_db

# Redis connection URL (required for BullMQ)
# Format: redis://host:port or redis://user:password@host:port
JOBS_REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------

# Logging level (debug|info|warn|error) - default: info
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# BullBoard Dashboard Settings
# -----------------------------------------------------------------------------

# Enable BullBoard dashboard (true|false, default: true)
JOBS_DASHBOARD_ENABLED=true

# Dashboard server port (default: 3105)
JOBS_DASHBOARD_PORT=3105

# Dashboard path (default: /dashboard)
# Access at: http://localhost:3105/dashboard

# -----------------------------------------------------------------------------
# Worker Settings
# -----------------------------------------------------------------------------

# Default concurrency for job workers (default: 5)
# Number of jobs that can be processed simultaneously
JOBS_DEFAULT_CONCURRENCY=5

# Job timeout in milliseconds (default: 60000 = 60 seconds)
# Jobs that exceed this time will be marked as failed
JOBS_JOB_TIMEOUT=60000

# -----------------------------------------------------------------------------
# Retry Settings
# -----------------------------------------------------------------------------

# Maximum retry attempts for failed jobs (default: 3)
JOBS_RETRY_ATTEMPTS=3

# Retry delay in milliseconds (default: 5000 = 5 seconds)
# Delay before retrying a failed job
JOBS_RETRY_DELAY=5000

# -----------------------------------------------------------------------------
# Telemetry & Monitoring
# -----------------------------------------------------------------------------

# Enable job telemetry (true|false, default: true)
# Tracks job execution metrics and statistics
JOBS_ENABLE_TELEMETRY=true

# -----------------------------------------------------------------------------
# Job Cleanup Settings
# -----------------------------------------------------------------------------

# Clean completed jobs after this duration (milliseconds)
# Default: 86400000 = 24 hours
JOBS_CLEAN_COMPLETED_AFTER=86400000

# Clean failed jobs after this duration (milliseconds)
# Default: 604800000 = 7 days
JOBS_CLEAN_FAILED_AFTER=604800000

# -----------------------------------------------------------------------------
# Queue Configuration
# -----------------------------------------------------------------------------
# The plugin supports multiple queues with different priorities:
#
# default queue:
#   - Concurrency: 5
#   - Priority: 0 (normal)
#
# high-priority queue:
#   - Concurrency: 3
#   - Priority: 10 (higher)
#
# low-priority queue:
#   - Concurrency: 10
#   - Priority: -10 (lower)

# -----------------------------------------------------------------------------
# Available Job Types
# -----------------------------------------------------------------------------
# The plugin supports these built-in job types:
# - send-email: Send email notifications
# - http-request: Make HTTP/API requests
# - database-backup: Backup database tables
# - file-cleanup: Clean up old files
# - custom: Custom job handlers
#
# Additional job types can be registered via the API

# -----------------------------------------------------------------------------
# BullMQ Information
# -----------------------------------------------------------------------------
# BullMQ: https://docs.bullmq.io/
#   - Redis-based job queue
#   - Supports priorities, delays, retries, cron schedules
#   - Built-in rate limiting and concurrency control
#   - BullBoard provides web UI for monitoring
#
# BullBoard Dashboard Features:
#   - View active, completed, and failed jobs
#   - Retry failed jobs manually
#   - View job logs and stack traces
#   - Monitor queue metrics in real-time
